<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PropertyHub - Admin Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.min.css" rel="stylesheet">
    <link href="./css/admin-dashboard.css" rel="stylesheet">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class="fas fa-building"></i>
                <span>PropertyHub</span>
            </div>
            <div class="subtitle">Management System</div>
        </div>
        
        <nav class="sidebar-nav">
            <div class="nav-section">
                <div class="nav-label">MANAGEMENT</div>
                <a href="#dashboard" class="nav-item active">
                    <i class="fas fa-chart-pie"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#properties" class="nav-item">
                    <i class="fas fa-home"></i>
                    <span>Properties</span>
                    <span class="nav-count">105</span>
                </a>
                <a href="#tenants" class="nav-item">
                    <i class="fas fa-users"></i>
                    <span>Tenants</span>
                    <span class="nav-count">89</span>
                </a>
                <a href="#financials" class="nav-item">
                    <i class="fas fa-dollar-sign"></i>
                    <span>Financials</span>
                </a>
                <a href="#messages" class="nav-item">
                    <i class="fas fa-envelope"></i>
                    <span>Messages</span>
                    <span class="nav-count">12</span>
                </a>
                <a href="#reports" class="nav-item">
                    <i class="fas fa-chart-bar"></i>
                    <span>Reports</span>
                </a>
                <a href="#settings" class="nav-item">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </div>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h1>Property Management Dashboard</h1>
                <p>Welcome back! Here's your property overview.</p>
            </div>
            <div class="header-right">
                <button class="quick-actions-btn">
                    <i class="fas fa-bolt"></i>
                    Quick Actions
                </button>
                <div class="user-profile">
                    <span>JS</span>
                </div>
            </div>
        </header>

        <!-- Dashboard Content -->
        <div class="dashboard-content">
            <!-- Metrics Cards -->
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-header">
                        <span class="metric-title">Total Properties</span>
                        <i class="fas fa-info-circle metric-info"></i>
                    </div>
                    <div class="metric-value">105</div>
                    <div class="metric-change positive">+7 from last month</div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-header">
                        <span class="metric-title">Active Tenants</span>
                        <i class="fas fa-info-circle metric-info"></i>
                    </div>
                    <div class="metric-value">89</div>
                    <div class="metric-change positive">85% occupancy rate</div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-header">
                        <span class="metric-title">Monthly Revenue</span>
                        <i class="fas fa-dollar-sign metric-icon"></i>
                    </div>
                    <div class="metric-value">$67,000</div>
                    <div class="metric-change positive">+12% from last month</div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-header">
                        <span class="metric-title">Outstanding Dues</span>
                        <i class="fas fa-exclamation-triangle metric-icon warning"></i>
                    </div>
                    <div class="metric-value">$8,450</div>
                    <div class="metric-change negative">5 overdue payments</div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-section">
                <div class="chart-card">
                    <div class="chart-header">
                        <h3>Monthly Revenue Trend</h3>
                        <p>Revenue collection over the last 6 months</p>
                    </div>
                    <div class="chart-container">
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>
                
                <div class="chart-card">
                    <div class="chart-header">
                        <h3>Property Status Distribution</h3>
                        <p>Current status of all properties</p>
                    </div>
                    <div class="chart-container">
                        <canvas id="statusChart"></canvas>
                    </div>
                    <div class="chart-legend">
                        <div class="legend-item">
                            <span class="legend-color occupied"></span>
                            <span>Occupied (85%)</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color vacant"></span>
                            <span>Vacant (12%)</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color maintenance"></span>
                            <span>Maintenance (3%)</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions-section">
                <h3>Quick Actions</h3>
                <p>Frequently used management tools</p>
                <div class="actions-grid">
                    <button class="action-btn" onclick="showAddPropertyModal()">
                        <i class="fas fa-plus"></i>
                        <span>Add Property</span>
                    </button>
                    <button class="action-btn" onclick="showAddTenantModal()">
                        <i class="fas fa-user-plus"></i>
                        <span>Add Tenant</span>
                    </button>
                    <button class="action-btn" onclick="generateBills()">
                        <i class="fas fa-file-invoice"></i>
                        <span>Generate Bills</span>
                    </button>
                    <button class="action-btn" onclick="broadcastMessage()">
                        <i class="fas fa-bullhorn"></i>
                        <span>Broadcast Message</span>
                    </button>
                </div>
            </div>

            <!-- Bottom Section -->
            <div class="bottom-section">
                <!-- Recent Activity -->
                <div class="activity-card">
                    <div class="card-header">
                        <h3>Recent Activity</h3>
                        <p>Latest events and updates</p>
                    </div>
                    <div class="activity-list">
                        <div class="activity-item">
                            <div class="activity-icon new-tenant">
                                <i class="fas fa-user-plus"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-title">New tenant registered</div>
                                <div class="activity-subtitle">Sunset Apartments #205</div>
                            </div>
                            <div class="activity-time">2 hours ago</div>
                        </div>
                        
                        <div class="activity-item">
                            <div class="activity-icon payment">
                                <i class="fas fa-credit-card"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-title">Payment received</div>
                                <div class="activity-subtitle">Jane Smith â€¢ $1200</div>
                            </div>
                            <div class="activity-time">4 hours ago</div>
                        </div>
                        
                        <div class="activity-item">
                            <div class="activity-icon maintenance">
                                <i class="fas fa-wrench"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-title">Maintenance request</div>
                                <div class="activity-subtitle">Oak Street #12</div>
                            </div>
                            <div class="activity-time">6 hours ago</div>
                        </div>
                        
                        <div class="activity-item">
                            <div class="activity-icon lease">
                                <i class="fas fa-file-contract"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-title">Lease renewed</div>
                                <div class="activity-subtitle">Sarah Johnson</div>
                            </div>
                            <div class="activity-time">1 day ago</div>
                        </div>
                    </div>
                </div>

                <!-- Key Properties -->
                <div class="properties-card">
                    <div class="card-header">
                        <h3>Key Properties</h3>
                        <p>Properties requiring attention</p>
                    </div>
                    <div class="properties-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Property</th>
                                    <th>Tenant</th>
                                    <th>Rent</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="propertiesTableBody">
                                <tr>
                                    <td>Sunset Apartments #205</td>
                                    <td>Mike Davis</td>
                                    <td>$1200</td>
                                    <td><span class="status-badge paid">Paid</span></td>
                                </tr>
                                <tr>
                                    <td>Oak Street #12</td>
                                    <td>Lisa Wilson</td>
                                    <td>$950</td>
                                    <td><span class="status-badge overdue">Overdue</span></td>
                                </tr>
                                <tr>
                                    <td>Pine View #8</td>
                                    <td>Robert Brown</td>
                                    <td>$1100</td>
                                    <td><span class="status-badge due-soon">Due Soon</span></td>
                                </tr>
                                <tr>
                                    <td>Maple Court #15</td>
                                    <td>Jennifer Lee</td>
                                    <td>$1350</td>
                                    <td><span class="status-badge paid">Paid</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Customer Management Section (Hidden by default) -->
        <div class="customer-management" style="display: none;">
            <div class="management-header">
                <h2>Customer Management</h2>
                <div class="management-actions">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="showDeleted">
                        <label class="form-check-label" for="showDeleted">Show deleted</label>
                    </div>
                    <button id="logoutBtn" class="btn-logout">
                        <i class="fas fa-sign-out-alt"></i>
                        Logout
                    </button>
                </div>
            </div>

            <!-- Customer Form -->
            <div class="form-card">
                <div class="form-header">
                    <h3 id="formTitle">Add / Edit Customer</h3>
                </div>
                <form id="customerForm" class="customer-form">
                    <input type="hidden" id="customerId" />
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="name">Name</label>
                            <input id="name" class="form-input" required />
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input id="email" type="email" class="form-input" required />
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone</label>
                            <input id="phone" class="form-input" />
                        </div>
                        <div class="form-group">
                            <label for="company">Company</label>
                            <input id="company" class="form-input" />
                        </div>
                        <div class="form-group">
                            <label for="status">Status</label>
                            <select id="status" class="form-select">
                                <option>Active</option>
                                <option>Inactive</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="dueAmount">Due Amount ($)</label>
                            <input id="dueAmount" type="number" min="0" step="0.01" class="form-input" />
                        </div>
                        <div class="form-group">
                            <label for="paid">Paid?</label>
                            <select id="paid" class="form-select">
                                <option value="false">No</option>
                                <option value="true">Yes</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save"></i>
                            Save
                        </button>
                        <button type="button" id="cancelEdit" class="btn-secondary" style="display: none;">
                            <i class="fas fa-times"></i>
                            Cancel
                        </button>
                        <p id="formMsg" class="form-message"></p>
                    </div>
                </form>
            </div>

            <!-- Customer Table -->
            <div class="table-card">
                <div class="table-header">
                    <h3>Customer List</h3>
                </div>
                <div class="table-container">
                    <table id="customersTable" class="data-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Company</th>
                                <th>Status</th>
                                <th>Due</th>
                                <th>Paid</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <p id="tableMsg" class="table-message"></p>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./js/common.js"></script>
    <script src="./js/customers.js"></script>
</body>
</html>
